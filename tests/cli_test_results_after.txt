============================= test session starts =============================
platform win32 -- Python 3.12.5, pytest-7.4.3, pluggy-1.5.0 -- C:\Python312\python.exe
cachedir: .pytest_cache
hypothesis profile 'default'
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
metadata: {'Python': '3.12.5', 'Platform': 'Windows-10-10.0.19045-SP0', 'Packages': {'pytest': '7.4.3', 'pluggy': '1.5.0'}, 'Plugins': {'anyio': '4.11.0', 'Faker': '18.13.0', 'hypothesis': '6.138.2', 'langsmith': '0.4.21', 'asyncio': '0.21.1', 'bandit': '0.6.1', 'benchmark': '4.0.0', 'cov': '4.1.0', 'env': '1.1.5', 'flask': '1.3.0', 'json-report': '1.5.0', 'metadata': '3.1.1', 'mock': '3.14.0', 'randomly': '3.16.0', 'timeout': '2.3.1', 'xdist': '3.6.1'}, 'JAVA_HOME': 'C:\\Program Files\\AdoptOpenJDK\\jre-8.0.265.01-hotspot\\'}
Using --randomly-seed=3661670347
rootdir: C:\Users\17175\Desktop\connascence\tests
configfile: pytest.ini
plugins: anyio-4.11.0, Faker-18.13.0, hypothesis-6.138.2, langsmith-0.4.21, asyncio-0.21.1, bandit-0.6.1, benchmark-4.0.0, cov-4.1.0, env-1.1.5, flask-1.3.0, json-report-1.5.0, metadata-3.1.1, mock-3.14.0, randomly-3.16.0, timeout-2.3.1, xdist-3.6.1
asyncio: mode=Mode.STRICT
collecting ... collected 20 items

tests\test_cli.py::TestCLIExecution::test_cli_version FAILED             [  5%]
tests\test_cli.py::TestCLIExecution::test_cli_help FAILED                [ 10%]
tests\test_cli.py::TestCLIIntegration::test_verbose_logging PASSED       [ 15%]
tests\test_cli.py::TestCLIIntegration::test_end_to_end_scan FAILED       [ 20%]
tests\test_cli.py::TestCLIIntegration::test_cli_error_handling PASSED    [ 25%]
tests\test_cli.py::TestCLIAutofixCommand::test_autofix_apply_mode FAILED [ 30%]
tests\test_cli.py::TestCLIAutofixCommand::test_autofix_confidence_filtering FAILED [ 35%]
tests\test_cli.py::TestCLIAutofixCommand::test_autofix_without_force_flag FAILED [ 40%]
tests\test_cli.py::TestCLIAutofixCommand::test_autofix_preview_mode PASSED [ 45%]
tests\test_cli.py::TestCLIScanCommand::test_scan_with_violations FAILED  [ 50%]
tests\test_cli.py::TestCLIScanCommand::test_scan_json_output FAILED      [ 55%]
tests\test_cli.py::TestCLIScanCommand::test_scan_basic_execution FAILED  [ 60%]
tests\test_cli.py::TestCLIScanCommand::test_scan_with_policy FAILED      [ 65%]
tests\test_cli.py::TestConnascenceCLI::test_parser_creation PASSED       [ 70%]
tests\test_cli.py::TestConnascenceCLI::test_baseline_command_parsing PASSED [ 75%]
tests\test_cli.py::TestConnascenceCLI::test_autofix_command_parsing PASSED [ 80%]
tests\test_cli.py::TestConnascenceCLI::test_scan_command_parsing PASSED  [ 85%]
tests\test_cli.py::TestCLISubcommands::test_mcp_serve_command PASSED     [ 90%]
tests\test_cli.py::TestCLISubcommands::test_baseline_snapshot_command PASSED [ 95%]
tests\test_cli.py::TestCLISubcommands::test_scan_diff_command PASSED     [100%]
Run started:2025-11-13 22:18:29.020448

Test results:
	No issues identified.

Code scanned:
	Total lines of code: 0
	Total lines skipped (#nosec): 0

Run metrics:
	Total issues (by severity):
		Undefined: 0
		Low: 0
		Medium: 0
		High: 0
	Total issues (by confidence):
		Undefined: 0
		Low: 0
		Medium: 0
		High: 0
Files skipped (0):


================================== FAILURES ===================================
C:\Users\17175\Desktop\connascence\tests\test_cli.py:574: AssertionError: assert 'connascence' in 'warning: optimization components not available for benchmarking\nwarning: optimization components not available for benchmarking\nwarning: streaming components not available for benchmarking\n'
C:\Users\17175\Desktop\connascence\tests\test_cli.py:555: AssertionError: assert 'connascence' in 'warning: optimization components not available for benchmarking\nwarning: optimization components not available for benchmarking\nwarning: streaming components not available for benchmarking\n'
C:\Users\17175\Desktop\connascence\tests\test_cli.py:448: assert 0 == 1
C:\Users\17175\Desktop\connascence\tests\test_cli.py:310: ImportError: cannot import name 'AutofixResult' from 'autofix.patch_api' (C:\Users\17175\Desktop\connascence\autofix\patch_api.py)
C:\Users\17175\Desktop\connascence\tests\test_cli.py:402: AssertionError: Expected '_filter_patches' to have been called.
C:\Users\17175\Desktop\connascence\tests\test_cli.py:350: AssertionError: assert ('force' in 'error: must specify --apply to apply fixes or --preview to preview' or 'confirm' in 'error: must specify --apply to apply fixes or --preview to preview')
C:\Users\17175\Desktop\connascence\tests\test_cli.py:214: assert 0 == 1
C:\Users\17175\Desktop\connascence\tests\test_cli.py:241: AssertionError: Expected 'JSONReporter' to have been called once. Called 0 times.
C:\Users\17175\Desktop\connascence\tests\test_cli.py:168: AssertionError: Expected 'analyze_directory' to have been called once. Called 0 times.
C:\Users\17175\Desktop\connascence\tests\test_cli.py:258: AssertionError: expected call not found.
=========================== short test summary info ===========================
FAILED tests\test_cli.py::TestCLIExecution::test_cli_version - AssertionError...
FAILED tests\test_cli.py::TestCLIExecution::test_cli_help - AssertionError: a...
FAILED tests\test_cli.py::TestCLIIntegration::test_end_to_end_scan - assert 0...
FAILED tests\test_cli.py::TestCLIAutofixCommand::test_autofix_apply_mode - Im...
FAILED tests\test_cli.py::TestCLIAutofixCommand::test_autofix_confidence_filtering
FAILED tests\test_cli.py::TestCLIAutofixCommand::test_autofix_without_force_flag
FAILED tests\test_cli.py::TestCLIScanCommand::test_scan_with_violations - ass...
FAILED tests\test_cli.py::TestCLIScanCommand::test_scan_json_output - Asserti...
FAILED tests\test_cli.py::TestCLIScanCommand::test_scan_basic_execution - Ass...
FAILED tests\test_cli.py::TestCLIScanCommand::test_scan_with_policy - Asserti...
======================== 10 failed, 10 passed in 5.05s ========================
