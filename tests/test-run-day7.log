============================= test session starts =============================
platform win32 -- Python 3.12.5, pytest-9.0.1, pluggy-1.5.0 -- C:\Python312\python.exe
cachedir: .pytest_cache
hypothesis profile 'default'
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
metadata: {'Python': '3.12.5', 'Platform': 'Windows-10-10.0.19045-SP0', 'Packages': {'pytest': '9.0.1', 'pluggy': '1.5.0'}, 'Plugins': {'anyio': '4.11.0', 'Faker': '18.13.0', 'hypothesis': '6.138.2', 'langsmith': '0.4.21', 'asyncio': '1.3.0', 'bandit': '0.6.1', 'benchmark': '4.0.0', 'cov': '4.1.0', 'env': '1.1.5', 'flask': '1.3.0', 'json-report': '1.5.0', 'metadata': '3.1.1', 'mock': '3.14.0', 'randomly': '3.16.0', 'timeout': '2.3.1', 'xdist': '3.6.1'}, 'JAVA_HOME': 'C:\\Program Files\\AdoptOpenJDK\\jre-8.0.265.01-hotspot\\'}
Using --randomly-seed=3255481606
rootdir: C:\Users\17175\Desktop\connascence
configfile: pyproject.toml
testpaths: tests, fixtures
plugins: anyio-4.11.0, Faker-18.13.0, hypothesis-6.138.2, langsmith-0.4.21, asyncio-1.3.0, bandit-0.6.1, benchmark-4.0.0, cov-4.1.0, env-1.1.5, flask-1.3.0, json-report-1.5.0, metadata-3.1.1, mock-3.14.0, randomly-3.16.0, timeout-2.3.1, xdist-3.6.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... Warning: Optimization components not available for benchmarking
Warning: Optimization components not available for benchmarking
Warning: Streaming components not available for benchmarking
================================================================================
DETECTOR PIPELINE FUNCTIONALITY AUDIT
================================================================================

[TEST 1] Import Test
----------------------------------------
[PASS] PositionDetector imported successfully
[PASS] MagicLiteralDetector imported successfully
[PASS] GodObjectDetector imported successfully

[TEST 2] Instantiation Test
----------------------------------------
[PASS] PositionDetector instantiated
   - file_path: test.py
   - source_lines count: 7
   - max_positional_params: 3

[TEST 3] AST Parsing Test
----------------------------------------
[PASS] Code parsed successfully
   - AST type: <class 'ast.Module'>
   - Body length: 1
   - Functions found: 1
     - test_function: 8 parameters

[TEST 4] Detection Execution Test
----------------------------------------
[PASS] detect_violations() executed
   - Return type: <class 'list'>
   - Violations count: 1
   [PASS] Found 1 violations:
      1. Type: <class 'dict'>
         - description: N/A
         - line: N/A
         - severity: N/A

[TEST 5] Detailed Execution Trace
----------------------------------------
   => detect_violations() called with tree type: <class 'ast.Module'>
   <= detect_violations() returned: <class 'list'> with 1 items

   Final result: 1 violations

[TEST 6] Source Code Inspection
----------------------------------------
   detect_violations source code (first 50 lines):
     1 |     def detect_violations(self, tree: ast.AST) -> List[ConnascenceViolation]:
     2 |         """
     3 |         Detect functions with too many positional parameters using standardized interface.
     4 | 
     5 |         Args:
     6 |             tree: AST tree to analyze
     7 | 
     8 |         Returns:
     9 |             List of ConnascenceViolation objects
    10 |         """
    11 |         self.violations.clear()
    12 | 
    13 |         # Use common patterns to find function definitions
    14 |         functions = ASTUtils.find_nodes_by_type(tree, ast.FunctionDef)
    15 | 
    16 |         for node in functions:
    17 |             self._check_function_parameters(node)
    18 | 
    19 |         return self.violations
    20 | 

================================================================================
AUDIT COMPLETE
================================================================================
[WARNING] Clarity detectors not available for import
[CLI INTEGRATION TEST]
============================================================
Test file: C:\Users\17175\Desktop\connascence\tests\cli_test_sample.py
Project root: C:\Users\17175\Desktop\connascence

[TEST 1] Main CLI - Direct Import
------------------------------------------------------------
[FAIL] Failed to import ConnascenceCLI: cannot import name 'ConnascenceCLI' from 'analyzer.check_connascence' (C:\Users\17175\Desktop\connascence\analyzer\check_connascence.py)

[TEST 2] Minimal CLI - Direct Import
------------------------------------------------------------
[PASS] check_connascence_minimal imported successfully
  - main function: main

[TEST 3] Direct Detector Usage
------------------------------------------------------------
[PASS] PositionDetector: 1 violations found
[PASS] MagicLiteralDetector: 4 violations found
  - Total violations: 5

============================================================
[INTEGRATION TEST COMPLETE]
[CLI INTEGRATION TEST - Phase 1.2]
============================================================
[PASS] PositionDetector          - 1 violations
[PASS] ValuesDetector            - 0 violations
[PASS] AlgorithmDetector         - 0 violations
[PASS] MagicLiteralDetector      - 3 violations
[PASS] TimingDetector            - 0 violations
[PASS] ExecutionDetector         - 0 violations
[PASS] GodObjectDetector         - 0 violations
[PASS] ConventionDetector        - 6 violations
============================================================
Detectors Passed: 8/8
Detectors Failed: 0/8
Total Violations: 10
============================================================
[SUCCESS] All detectors operational
License validation system not available: Module not implemented
collected 964 items / 4 skipped

tests/e2e/test_exit_codes.py::TestExitCodeWorkflows::test_exit_code_consistency_across_runs FAILEDdatetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

Run started:2025-11-15 13:14:12.745342

Test results:
	No issues identified.

Code scanned:
	Total lines of code: 0
	Total lines skipped (#nosec): 0

Run metrics:
	Total issues (by severity):
		Undefined: 0
		Low: 0
		Medium: 0
		High: 0
	Total issues (by confidence):
		Undefined: 0
		Low: 0
		Medium: 0
		High: 0
Files skipped (0):


================================== FAILURES ===================================
________ TestExitCodeWorkflows.test_exit_code_consistency_across_runs _________
tests\e2e\test_exit_codes.py:944: in test_exit_code_consistency_across_runs
    exit_code_workflow_validator.start_scenario(scenario_id, "Exit code consistency testing")
tests\e2e\test_cli_workflows.py:107: in start_scenario
    self.memory.store_test_scenario(scenario_id, {"description": description, "start_time": time.time()})
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ExitCodeCoordinator' object has no attribute 'store_test_scenario'

---------- coverage: platform win32, python 3.12.5-final-0 -----------
Name                                     Stmts   Miss Branch BrPart   Cover   Missing
-------------------------------------------------------------------------------------
autofix\__init__.py                          0      0      0      0 100.00%
autofix\class_splits.py                    206    206     80      0   0.00%   21-396
autofix\core.py                            243    243     78      0   0.00%   14-477
autofix\god_objects.py                       5      5      0      0   0.00%   15-22
autofix\magic_literals.py                  151    116     70      0  15.84%   46-49, 60-73, 89-109, 119-149, 153-168, 172-193, 198-209, 213-216, 220-231, 238-239, 242-244, 247-249, 252-254, 261-262, 266-268, 272-281, 285-287, 291, 295-298
autofix\param_bombs.py                     182    145     68      0  14.80%   56-57, 63-76, 90-112, 123-134, 138-161, 166-177, 181-194, 198-207, 211-218, 223-246, 251-275, 279-294, 298-305, 312-315, 318-320, 323-329
autofix\patch_api.py                        44     13      8      0  59.62%   31-32, 46-51, 61, 68, 71, 78, 81
autofix\patch_generator.py                 230    230     76      0   0.00%   27-608
autofix\tier_classifier.py                  95     95     38      0   0.00%   32-369
autofix\type_hints.py                      192    159     88      0  11.79%   45-62, 75-88, 102-110, 120-146, 152-193, 199-237, 241-260, 264-267, 271-297, 301, 305, 312-313, 316-318, 325-328, 331-334, 338-342, 346-351, 354-356
cli\__init__.py                             11      2      2      1  76.92%   20-21, 25->exit
cli\__main__.py                             18     18      0      0   0.00%   3-27
cli\connascence.py                          70     44     10      1  33.75%   19-22, 28, 32-73, 78, 81-82, 87, 90, 95, 106-114, 120-125, 130, 133, 143->exit
mcp\__init__.py                              2      0      0      0 100.00%
mcp\cli.py                                 126    126     22      0   0.00%   14-254
mcp\enhanced_server.py                     340    340     80      0   0.00%   18-761
mcp\server.py                              325    273     94      0  12.41%   41-88, 93-124, 130-132, 143-144, 147-150, 155-159, 166-188, 193-259, 263-319, 323, 328-345, 349-367, 371-399, 411-440, 444-481, 485-497, 501, 514-599, 615, 619, 625-627, 634-646, 651-696, 707-727, 736, 745-768, 780, 784, 805-809, 813-820, 824-829, 833-841, 845, 850-854
policy\__init__.py                           5      0      0      0 100.00%
policy\baselines.py                        255    185     48      0  23.10%   51, 64, 89, 101, 122-154, 170-179, 190-217, 221-222, 226-235, 241-275, 297-324, 328-336, 340-348, 352-357, 361-365, 369, 380-384, 400-404, 412-413, 420-439, 443, 456, 462-485, 501-502, 506-521, 526-538, 543-547, 552-584, 590-595, 599
policy\budgets.py                          179    132     56      0  20.00%   75-83, 87-106, 111-118, 124-175, 189-206, 210-217, 221-250, 254-279, 286-289, 293, 297-303, 309-341, 351-359, 371-382, 386-395, 399, 403-405, 410-411, 416-419
policy\drift.py                            196    196     42      0   0.00%   30-459
policy\manager.py                          222    175    104      0  14.42%   25-27, 69-135, 140-150, 155-172, 180-183, 187, 191-217, 221-239, 243-250, 254-278, 282-286, 292-351, 356-384, 389-397, 407-426, 430-467, 480-486, 490
policy\presets\__init__.py                   0      0      0      0 100.00%
policy\presets\general_safety_rules.py       3      3      0      0   0.00%   15-18
policy\waivers.py                          239    175     66      0  20.98%   42-44, 95-101, 105-124, 131-140, 144-173, 177-198, 202-228, 242-265, 269-282, 286-299, 303-306, 310-313, 317, 325-334, 338-352, 356-379, 389-416, 420-424, 438-440, 447-448, 451-453
-------------------------------------------------------------------------------------
TOTAL                                     3339   2881   1030      2  10.53%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml

=========================== short test summary info ===========================
FAILED tests/e2e/test_exit_codes.py::TestExitCodeWorkflows::test_exit_code_consistency_across_runs
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!
======================== 1 failed, 4 skipped in 9.49s =========================
